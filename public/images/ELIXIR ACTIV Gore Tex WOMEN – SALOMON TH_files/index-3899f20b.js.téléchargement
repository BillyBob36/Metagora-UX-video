function me(){import("data:text/javascript,")}const H=function(){const t=document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),Q=function(e){return"https://cdn.myshopline.com/t/layout/plugin/2025091509402222/sales-promotion-plugin/"+e},R={},g=function(t,n,o){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=Q(r),r in R)return;R[r]=!0;const i=r.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${a}`))return;const s=document.createElement("link");if(s.rel=i?"stylesheet":H,i||(s.as="script",s.crossOrigin=""),s.href=r,document.head.appendChild(s),i)return new Promise((c,l)=>{s.addEventListener("load",c),s.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},U=()=>{window.magpieBridge||(window.magpieBridge={})},W=()=>{U(),window.magpieBridge.promise||(window.magpieBridge.promise=new Promise(o=>{window.magpieBridge._resolve_=o}));const e="/cf-edge-static/5714c1327c4014a703e02b0f3cce0f74/magpie-bridge-sdk-load.js";let t=0;function n(){const o=document.createElement("script");o.src=e,o.defer=!0,o.type="module",o.crossOrigin="anonymous",document.body.appendChild(o),o.onerror=()=>{if(t>3){window.magpieBridge.isLoaded=!1;return}t++,n()}}return window.magpieBridge.isLoaded||(window.magpieBridge.isLoaded=!0,n()),window.magpieBridge.promise};function L(){var t;return((t=window.Shopline)==null?void 0:t.themeTypeVersion)>=2.1}function A(){var t;const e=(t=window.Shopline)==null?void 0:t.themeTypeVersion;return e>=3&&e<4}function he(){var t;const e=(t=window.Shopline)==null?void 0:t.themeTypeVersion;return e>=2.1&&e<3}function F(){return L()}const C={skuChanged:"Product::SkuChanged",updateCollectionSection:"Product::UpdateSection::Filter",scrollUpdateCollection:"Product::UpdateSection::Scroll",miniCartOpen:"Cart::MiniCart::Open",miniCartClose:"Cart::MiniCart::Close",miniCartUpdate:"Cart::MiniCart::Update",recommendUpdate:"Product::Recommend::Update",quickAddClose:"Product::CloseQuickAdd::AddToCart",quickAddOpen:"Product::OpenQuickAdd::AddToCart",stageHeaderSticky:"Stage::Header::Sticky",bannerMiniCartClose:"Cart::BannerMiniCart::Close",bannerMiniCartOpen:"Cart::BannerMiniCart::Open",cartPageUpdate:"Cart::CartPage::Update",openQuickAddModal:"Product::OpenQuickAddModal"};U();const _e=window.magpieBridge,K=()=>{var t;if(!A())return null;const e=document.querySelector(".promotion-product-banner__app-block");return e&&((t=e==null?void 0:e.classList)==null||t.add("sales-promotion-plugin")),e},T=()=>!!K(),N=async()=>{if(T())return;const e={pc:{container:document.querySelector("#price-main-product-info, .product-detail__price"),outsideSlot:{className:"d-md-block sales-promotion-plugin"}},mobile:{container:document.querySelector(".product__media-wrapper, theme-product-media-gallery"),outsideSlot:{className:"d-md-none sales-promotion-plugin sales-promotion-plugin-mobile"}}};try{Object.keys(e).forEach(t=>{var o,r,i,a;const n=document.createElement("div");if(n.className=e[t].outsideSlot.className,t==="pc"){const s=(o=e[t])==null?void 0:o.container,c=(s==null?void 0:s.parentElement)||document.querySelector("#ProductInfo-main-product-info, .product-detail__info");(r=c==null?void 0:c.insertBefore)==null||r.call(c,n,s==null?void 0:s.nextElementSibling)}else(a=(i=e[t])==null?void 0:i.container)==null||a.appendChild(n)})}catch(t){window.__sl_console__.error(t)}},J={"/api/bff/sale-plugin/front/common/activityPage":"/api/sale/activity/activityPage","/api/bff/sale-plugin/front/common/product/list/query/by_activity/v21":"/api/sale/product/list/query/by_activity/v21"};let I=!1;const Y=()=>I,b=e=>{I=e},M=new RegExp(/{{([\s\S]+?)}}/g),X=(e,t,n=M)=>{if(t&&Object.keys(t||{}).length>0)return e==null?void 0:e.replace(n,(o,r)=>{var i;return r in t?`${(i=t[r])!=null?i:""}`:o})},Z=(e,t)=>{var o;let n=J[e]||e;return Y()&&(n=e),t&&((o=Object.keys(t))==null?void 0:o.length)?X(n,t,M):n};function h(e){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(e)}function ee(e,t){if(h(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(h(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V(e){var t=ee(e,"string");return h(t)=="symbol"?t:t+""}function f(e,t,n){return(t=V(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(o){f(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,V(o.key),o)}}function x(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function te(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}function ne(e,t){if(e==null)return{};var n,o,r=te(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var oe=["baseURL"],q=function(){function e(){G(this,e),f(this,"_callbacks",void 0),f(this,"_errorCallbacks",void 0),this._callbacks=[],this._errorCallbacks=[]}return x(e,[{key:"use",value:function(n,o){typeof n=="function"&&this._callbacks.push(n),typeof o=="function"&&this._errorCallbacks.push(o)}}]),e}();function re(e){if(e&&h(e)==="object"){var t=[];return Object.keys(e).forEach(function(n){t.push("".concat(n,"=").concat(encodeURIComponent(e[n])))}),t.join("&")}return e}var ie=function(t,n){var o=t.indexOf("?")>=0?"&":"?";return n?"".concat(t).concat(o).concat(re(n)):t},ce=function(){function e(t){var n=this;G(this,e),f(this,"_interceptorRequest",void 0),f(this,"_interceptorResponse",void 0),f(this,"_baseOptions",void 0),f(this,"_baseURL",void 0),f(this,"_getUrl",function(a){return"".concat(n._baseURL||"").concat(a)}),this._interceptorRequest=new q,this._interceptorResponse=new q;var o=t||{},r=o.baseURL,i=ne(o,oe);this._baseURL=r||"",this._baseOptions=i}return x(e,[{key:"interceptors",get:function(){return{request:{use:this._interceptorRequest.use.bind(this._interceptorRequest)},response:{use:this._interceptorResponse.use.bind(this._interceptorResponse)}}}},{key:"_fetch",value:function(n){var o,r,i,a,s,c=this,l=null,u=null,y=(o=(r=n==null?void 0:n.timeout)!==null&&r!==void 0?r:(i=this._baseOptions)===null||i===void 0?void 0:i.timeout)!==null&&o!==void 0?o:0,P=y>0;P&&(l=new AbortController,u=setTimeout(function(){return l.abort()},y));var _=d(d(d({},this._baseOptions),n),{},{headers:d({"content-type":"application/json"},n.headers),body:JSON.stringify((n==null?void 0:n.data)||n.body),credentials:"include",signal:P?l.signal:void 0});(a=this._interceptorRequest._callbacks)===null||a===void 0||a.forEach(function(v){_=v(_)});var D=(s=_)===null||s===void 0?void 0:s.path,$=this._getUrl(ie(D,_.params));return new Promise(function(v,k){fetch($,_).then(function(w){var m;u&&clearTimeout(u);var p=w;(m=c._interceptorResponse)===null||m===void 0||m._callbacks.forEach(function(z){p=z(p)}),p.status!==200&&k(p.json());var S=p.json();v(S)}).catch(function(w){var m;u&&clearTimeout(u);var p=w;(m=c._interceptorResponse._errorCallbacks)===null||m===void 0||m.forEach(function(S){p=S(p)}),k(p)})})}},{key:"get",value:function(n,o){return this._fetch(d(d({path:n},o),{},{method:"GET"}))}},{key:"post",value:function(n,o){return this._fetch(d(d({path:n},o),{},{method:"POST"}))}}]),e}(),se=function(t){return new ce(t)};const ae=se,O=ae({baseURL:""}),ue="X-Hit-Biz-Gray";O.interceptors.request.use(e=>{const t=Z(e.path);return{...e,path:t}});O.interceptors.response.use(e=>{const t=e.headers.get(ue);return t==="true"?b(!0):t==="false"&&b(!1),e});const le=()=>O.get("/api/bff/sale-plugin/front/promotion/gray/check",{timeout:1e3}).then(e=>{var t,n;b((n=(t=e==null?void 0:e.data)==null?void 0:t.isGray)!=null?n:!1)}).catch(()=>{b(!1)});function B(e={}){window.Shopline?g(()=>import("./simpleBootstrap-chunk-c049743b.js"),["simpleBootstrap-chunk-c049743b.js","usePriceNode-chunk-ceeb26d6.js","App-chunk-81d20ae8.js","assets/App.16c6ebac" + (document.dir === 'rtl' ?'-rtl':'') +".css","useCssVars-chunk-588ea674.js","assets/useCssVars.161d6d40" + (document.dir === 'rtl' ?'-rtl':'') +".css","index-chunk-2f4ad8d3.js","assets/index.04b525b5" + (document.dir === 'rtl' ?'-rtl':'') +".css"]).then(({default:t})=>{const{mount:n}=t;typeof n=="function"&&n(e)}):g(()=>import("./bootstrap-chunk-7553194f.js"),["bootstrap-chunk-7553194f.js","usePriceNode-chunk-ceeb26d6.js","App-chunk-81d20ae8.js","assets/App.16c6ebac" + (document.dir === 'rtl' ?'-rtl':'') +".css","useCssVars-chunk-588ea674.js","assets/useCssVars.161d6d40" + (document.dir === 'rtl' ?'-rtl':'') +".css","index-chunk-2f4ad8d3.js","assets/index.04b525b5" + (document.dir === 'rtl' ?'-rtl':'') +".css"]).then(({default:t})=>{const{mount:n}=t;typeof n=="function"&&n(e)})}function pe(e={}){g(()=>import("./index-chunk-be0e4720.js"),["index-chunk-be0e4720.js","assets/index.882404ca" + (document.dir === 'rtl' ?'-rtl':'') +".css","usePriceNode-chunk-ceeb26d6.js","useCssVars-chunk-588ea674.js","assets/useCssVars.161d6d40" + (document.dir === 'rtl' ?'-rtl':'') +".css"]).then(({default:t})=>{const{mount:n}=t;typeof n=="function"&&n({options:e})})}function de(e={}){g(()=>import("./index-chunk-9f6d7605.js"),["index-chunk-9f6d7605.js","usePriceNode-chunk-ceeb26d6.js","index-chunk-2f4ad8d3.js","assets/index.04b525b5" + (document.dir === 'rtl' ?'-rtl':'') +".css"]).then(()=>{})}const fe=async()=>{var e,t,n,o,r,i,a,s;try{await le()}catch(c){window.__sl_console__.error(c)}if(A()&&de(),((t=(e=window==null?void 0:window.Shopline)==null?void 0:e.uri)==null?void 0:t.alias)==="Page"){const c=document.querySelector(".custom-page-render-container > div"),l=document.querySelector("#shopline-section-main .custom-page-render-container > div")&&document.querySelector("#shopline-section-main .custom-page-render-container > div").shadowRoot||document,u=(l==null?void 0:l.querySelector("#promotion_activity_page"))||document.querySelector("#promotion_activity_page");if(u&&u.dataset.seq){if(c){const y=(i=(o=(n=c.shadowRoot)==null?void 0:n.querySelector)==null?void 0:o.call(n,".mce-content-body"))!=null?i:(r=c==null?void 0:c.querySelector)==null?void 0:r.call(c,".mce-content-body");c.parentElement.appendChild(y)}pe({root:u,id:u.dataset.seq})}}F()&&(await W(),window.magpieBridge.registerEventName([C.skuChanged,C.recommendUpdate])),((s=(a=window==null?void 0:window.Shopline)==null?void 0:a.uri)==null?void 0:s.alias)==="ProductsDetail"&&L()?(await N(),(document.querySelectorAll(".sales-promotion-plugin")[0]||T())&&B({options:{}})):B({options:{}})};fe();export{d as _,me as __vite_legacy_guard,ne as a,g as b,L as c,he as d,A as e,F as f,C as g,T as h,U as i,K as j,h as k,x as l,G as m,f as n,_e as o,O as r};
