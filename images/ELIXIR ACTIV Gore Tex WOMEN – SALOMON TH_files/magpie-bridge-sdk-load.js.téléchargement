var ge=Object.defineProperty,ye=Object.defineProperties;var Ce=Object.getOwnPropertyDescriptors;var Ft=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable;var lt=(k,v,p)=>v in k?ge(k,v,{enumerable:!0,configurable:!0,writable:!0,value:p}):k[v]=p,b=(k,v)=>{for(var p in v||(v={}))ve.call(v,p)&&lt(k,p,v[p]);if(Ft)for(var p of Ft(v))Se.call(v,p)&&lt(k,p,v[p]);return k},G=(k,v)=>ye(k,Ce(v));var m=(k,v,p)=>(lt(k,typeof v!="symbol"?v+"":v,p),p);var y=(k,v,p)=>new Promise((A,H)=>{var z=D=>{try{_(p.next(D))}catch(L){H(L)}},K=D=>{try{_(p.throw(D))}catch(L){H(L)}},_=D=>D.done?A(D.value):Promise.resolve(D.value).then(z,K);_((p=p.apply(k,v)).next())});(function(){var j,$t,Ht;"use strict";const k=()=>{window.magpieBridge||(window.magpieBridge={})};function v(){var t;return((t=window.Shopline)==null?void 0:t.themeTypeVersion)>=2.1}function p(){var t;const e=(t=window.Shopline)==null?void 0:t.themeTypeVersion;return e>=3&&e<4}function A(){var t;const e=(t=window.Shopline)==null?void 0:t.themeTypeVersion;return e>=2.1&&e<3}function H(){var e;return(e=window.Shopline)==null?void 0:e.url_customization}const z=(e,t)=>{const i=[];for(let o=0;o<e.length;o+=t)i.push(e.slice(o,o+t));return i},K=(e,t)=>{const i=[];let o=[],n=0;for(let r=0;r<e.length;r++)n+e[r].length>t&&(i.push(o),o=[],n=0),o.push(e[r]),n+=e[r].length;return o.length>0&&i.push(o),i},_=e=>{try{return decodeURI(e)}catch(t){return console.error(t),e}},D=e=>{try{return encodeURI(e)}catch(t){return console.error(t),e}},L="/api/product/product/handle/query?paramsList=",Qt=e=>new Promise((t,i)=>{fetch(L+e.join(",")).then(o=>{o.status===200?o.json().then(n=>{t((n==null?void 0:n.data)||[])}):i(o)},o=>{i(o)})}),jt=e=>y(this,null,function*(){if(k(),window.magpieBridge.productHandleCacheData||(window.magpieBridge.productHandleCacheData={}),!e||!e.length)return console.error("not input handle"),Promise.resolve([]);const t=[],i=[];if(e.forEach(s=>{var c,d,u,w;s&&((d=(c=window.magpieBridge)==null?void 0:c.productHandleCacheData)!=null&&d[s]?t.push((w=(u=window.magpieBridge)==null?void 0:u.productHandleCacheData)==null?void 0:w[s]):i.includes(s)||i.push(s))}),!i.length)return Promise.resolve(t);const o=z(i,50);let n=[];o.forEach(s=>{n=[...n,...K(s,3500)]});let r=[];try{r=yield Promise.all(n.map(s=>Qt(s)))}catch(s){return console.error(s),Promise.reject(s)}const a=r==null?void 0:r.reduce((s,c)=>Array.isArray(c)?s.concat(c):s,[]);return a.forEach(s=>{(s==null?void 0:s.handle)&&window.magpieBridge.productHandleCacheData&&(window.magpieBridge.productHandleCacheData[s.handle]=s)}),t.concat(a)}),Wt="/api/custom-url/resources.json",Gt=(e,t)=>y(this,null,function*(){const i=e.filter(n=>!n.hit_route&&!!n.handle).map(n=>encodeURI(n.handle));(yield jt(i)).forEach(n=>{const r=e.findIndex(a=>decodeURI(a.handle)===decodeURI(n.handle));e[r]&&(e[r]=b(b({},e[r]),n))}),t(e.filter(n=>!!n.id))}),N=e=>new Promise((t,i)=>{fetch(Wt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({custom_urls:e})}).then(o=>{o.status===200?o.json().then(n=>{n.data.resources.some(r=>!r.hit_route)?Gt(n.data.resources,t):t((n==null?void 0:n.data.resources)||[])}):i(o)},o=>{i(o)})}),M=(e="")=>{var o,n;let t=e;(o=e==null?void 0:e.startsWith)!=null&&o.call(e,"http")||(t=location.origin+e);try{t=(n=new URL(t))==null?void 0:n.pathname}catch(r){console.error(r)}const i=t==null?void 0:t.split("/products/");if((i==null?void 0:i.length)>1){let r=i==null?void 0:i[(i==null?void 0:i.length)-1];for(;r.endsWith("/");)r=r.substring(0,r.length-1);return r}},B={Home:"Home",About:"About",AboutPolicy:"AboutPolicy",AboutTerms:"AboutTerms",ContactUs:"ContactUs",PrivacyPolicy:"PrivacyPolicy",ShippingPolicy:"ShippingPolicy",PaymentMethod:"PaymentMethod",Faq:"Faq",ProductsSearch:"ProductsSearch",Custom:"Custom",OneShop:"OneShop",Page:"Page",ProductsDetail:"ProductsDetail",PreviewProductsDetail:"PreviewProductsDetail",Activity:"Activity",Products:"Products",BlogsDetail:"BlogsDetail",BlogsList:"BlogsList",AllCollections:"AllCollections",Proofing:"Proofing",NotFound:"404",Checkout:"Checkout",Center:"Center",OrderList:"OrderList",OrderDetail:"OrderDetail",OrderComment:"OrderComment",ReOrderList:"ReOrderList",ReOrderDetail:"ReOrderDetail",ReOrderConfirm:"ReOrderConfirm",SignIn:"SignIn",SignOut:"SignOut",SignUp:"SignUp",Bind:"Bind",AddressNew:"AddressNew",AddressEdit:"AddressEdit",Cart:"Cart",CheckoutError:"CheckoutError",RePay:"RePay",Processing:"Processing",Orders:"Orders",Thankyou:"Thankyou",ExpressCallback:"ExpressCallback",StockProblems:"StockProblems",PaymentMethods:"PaymentMethods",Password:"Password",Policy:"Policy",TransitPage:"TransitPage",PasswordNew:"PasswordNew",Message:"Message",PasswordReset:"PasswordReset",PointList:"PointList",Unsub:"Unsub",UnsubFeedback:"UnsubFeedback",GiftCard:"GiftCard",ActivateAccount:"ActivateAccount",Blank:"Blank"},l={skuChanged:"Product::SkuChanged",updateCollectionSection:"Product::UpdateSection::Filter",scrollUpdateCollection:"Product::UpdateSection::Scroll",miniCartOpen:"Cart::MiniCart::Open",miniCartClose:"Cart::MiniCart::Close",miniCartUpdate:"Cart::MiniCart::Update",recommendUpdate:"Product::Recommend::Update",quickAddClose:"Product::CloseQuickAdd::AddToCart",quickAddOpen:"Product::OpenQuickAdd::AddToCart",stageHeaderSticky:"Stage::Header::Sticky",bannerMiniCartClose:"Cart::BannerMiniCart::Close",bannerMiniCartOpen:"Cart::BannerMiniCart::Open",cartPageUpdate:"Cart::CartPage::Update",openQuickAddModal:"Product::OpenQuickAddModal",updateSearchSection:"Product::UpdateSearchPageSection::Filter"},zt=e=>{var o,n,r,a,s;let t=null;e?t=e:A()?t=document.querySelector("#MainProduct-main-product-info, #MainProduct-main"):p()&&(t=document.querySelector('theme-product-detail[data-section-type="main-product"]'));let i=(o=t==null?void 0:t.querySelector(p()?"theme-product-form":"product-form"))==null?void 0:o.querySelector("form");if(i||(i=t==null?void 0:t.querySelector("form[action='/api/carts/ajax-cart/addSingle.js']"),i&&((r=(n=window.__SL_Track__)==null?void 0:n.error)==null||r.call(n,"magpieBridgeSdkLog",{error:{message:"[getProductData], Merchant custom form"}}))),i){const c=new FormData(i),d=c.get("id"),u=c.get("quantity");return{productFormData:c,skuId:d,quantity:u,form:i,root:t}}else return(s=(a=window.__SL_Track__)==null?void 0:a.error)==null||s.call(a,"magpieBridgeSdkLog",{error:{message:"[getProductData], not find form"}}),null},S=(e,t)=>function(...i){var n,r;const o=(n=e==null?void 0:e.apply)==null?void 0:n.call(e,this,i);try{(r=t==null?void 0:t.apply)==null||r.call(t,this,i)}catch(a){console.error(a)}return o},Kt="/api/product/products.json?handle=",Jt=(e,t,i)=>(k(),window.magpieBridge.productCacheData||(window.magpieBridge.productCacheData={}),fetch(Kt+e).then(o=>{o.status===200?o.json().then(n=>{n.products&&n.products.length&&(t==null||t(n.products[0])),t==null||t(null)}):i==null||i()},()=>{i==null||i()})),pt=e=>{var i,o,n;if(!e)return console.error("not input handle"),Promise.resolve(null);if(e=D(_(e)),(o=(i=window.magpieBridge)==null?void 0:i.productCacheData)!=null&&o[e])return(n=window.magpieBridge.productCacheData)==null?void 0:n[e].promise;const t=new Promise(r=>{const a=function(){Jt(e,s=>{r(s)},()=>{var s,c,d,u;((s=window.magpieBridge.productCacheData)==null?void 0:s[e])&&((d=(c=window.magpieBridge.productCacheData)==null?void 0:c[e])==null?void 0:d.retryCount)<3?(window.magpieBridge.productCacheData[e].retryCount++,setTimeout(()=>{a()},500)):((u=window.magpieBridge.productCacheData)==null||delete u[e],r(null))})};a()});return window.magpieBridge.productCacheData[e]={promise:t,retryCount:0},t},Xt=()=>{var e,t;return((t=(e=window==null?void 0:window.Shopline)==null?void 0:e.uri)==null?void 0:t.alias)===B.Cart};k();const ht=()=>{window.magpieBridge||(window.magpieBridge={})};class Yt{constructor(){m(this,"_events");m(this,"_caches");this._events={},this._caches={}}addEventListener(t,i,o=!1){this._events[t]||(this._events[t]=[]),i.once=o,this._events[t].push(i)}emit(t,...i){const o=this._events[t];this._caches[t]||(this._caches[t]=[]),this._caches[t].push(i),Array.isArray(o)&&(this._events[t]=o.filter(n=>{try{n(...i)}catch(r){console.error(r)}return!n.once}))}on(t,i){this._caches[t]&&this._caches[t].forEach(o=>{try{i(...o)}catch(n){console.error(n)}}),this.addEventListener(t,i)}once(t,i){if(this._caches[t]){const o=this._caches[t][0];try{i(...o)}catch(n){console.error(n)}return}this.addEventListener(t,i,!0)}off(t,i){this._events[t]=this._events[t].filter(o=>i!==o)}}const Zt=()=>{var e;ht(),(e=window==null?void 0:window.magpieBridge)!=null&&e.event||(window.magpieBridge.event=new Yt)};ht();let ft=!1;function wt(e){return y(this,null,function*(){var n,r,a,s,c,d,u,w,f;let t=(r=(n=e.querySelector("variant-selects, variant-radios"))==null?void 0:n.dataset)==null?void 0:r.url;if(!t&&e&&(t=(a=e.dataset)==null?void 0:a.productUrl),!t&&(e==null?void 0:e.id)){const h=document.querySelector(`modal-opener[data-modal="#${e.id}"]`),g=h==null?void 0:h.querySelector('button[type="submit"]');g&&((s=g.dataset)==null?void 0:s.productUrl)&&(t=(c=g.dataset)==null?void 0:c.productUrl)}if(!t){const h=e==null?void 0:e.querySelector('a[href*="/products/"]');t=h==null?void 0:h.href}if(!t)return;let i="";if(window.Shopline.url_customization){let h=t;(d=t==null?void 0:t.startsWith)!=null&&d.call(t,"http")||(h=location.origin+t);try{h=(u=new URL(h))==null?void 0:u.pathname}catch(C){console.error(C)}const g=(w=yield N([h]))==null?void 0:w[0];g&&(i=g.handle)}else i=M(t)||"";const o=e==null?void 0:e.modalContent;i&&(window.magpieBridge.event&&(window.magpieBridge.event._caches[l.quickAddClose]=[]),(f=window.magpieBridge.event)==null||f.emit(l.quickAddOpen,{data:{modal:e,productUrl:t,handle:i,id:o.id||e.id,modalContent:o},onSuccess:()=>{},onError:()=>{}}))})}function Vt(e,t){var o,n,r;const i=t==null?void 0:t.dataset.handle;if(i){const a=(o=t==null?void 0:t.dataset)==null?void 0:o.url,s="QuickAddInfo-"+((n=t==null?void 0:t.dataset)==null?void 0:n.id);window.magpieBridge.event&&(window.magpieBridge.event._caches[l.quickAddClose]=[]),(r=window.magpieBridge.event)==null||r.emit(l.quickAddOpen,{data:{modal:e,productUrl:a,handle:i,id:s,modalContent:t},onSuccess:()=>{},onError:()=>{}})}}let q;const R=()=>y(this,null,function*(){var e;if(!ft){if(ft=!0,p())(e=window.themeEventCenter)==null||e.addListener("product:viewed",t=>{const i=t==null?void 0:t.target,o=i==null?void 0:i.closest("details");o&&Vt(o,i)});else if(yield Promise.race([customElements.whenDefined("quick-add-modal"),customElements.whenDefined("product-quick-view-modal")]),q=window.QuickAddModal?"QuickAddModal":"ProductQuickViewModal",window[q]&&window[q].prototype&&window[q].prototype.setInnerHTML){const t=document.querySelector("quick-add-modal details[open='true'], product-quick-view-modal details[open='true']");t&&wt(t.parentElement),window[q].prototype.setInnerHTML=S(window[q].prototype.setInnerHTML,function(){wt(this)})}}});R.key=l.quickAddOpen;let mt=!1;const U=()=>{var e;mt||(R(),(e=window.magpieBridge.event)==null||e.on(l.quickAddOpen,t=>{const{modal:i,productUrl:o,handle:n,modalContent:r,id:a}=t.data;if(p()){const s=i;if(s){const c=new MutationObserver(()=>{var d;s!=null&&s.hasAttribute("open")||(c.disconnect(),window.magpieBridge.event&&(window.magpieBridge.event._caches[l.quickAddOpen]=[]),(d=window.magpieBridge.event)==null||d.emit(l.quickAddClose,{data:{modal:i,productUrl:o,handle:n,id:a,modalContent:r},onSuccess:()=>{},onError:()=>{}}))});c.observe(s,{subtree:!1,attributes:!0,childList:!1})}}else{let s=i.querySelector("details");if(i.hasAttribute("load-feature-modal")&&(s=i),s){const c=new MutationObserver(()=>{var d;s!=null&&s.hasAttribute("open")||(c.disconnect(),window.magpieBridge.event&&(window.magpieBridge.event._caches[l.quickAddOpen]=[]),(d=window.magpieBridge.event)==null||d.emit(l.quickAddClose,{data:{modal:i,productUrl:o,handle:n,id:a,modalContent:r},onSuccess:()=>{},onError:()=>{}}))});c.observe(s,{subtree:!1,attributes:!0,childList:!1})}}}),mt=!0)};U.key=l.quickAddClose;class te{constructor(){m(this,"$watcher");m(this,"$afterWatcher");m(this,"$data");m(this,"watch");m(this,"watchAfter");Object.defineProperty(this,"$watcher",{value:{},configurable:!0}),Object.defineProperty(this,"$afterWatcher",{value:{},configurable:!0}),Object.defineProperty(this,"$data",{value:{},configurable:!0});const t=i=>(o,n)=>{const r={};o.forEach(a=>{this.$watcher[a]||(this.$watcher[a]=[]),this.$afterWatcher[a]||(this.$afterWatcher[a]=[]),i==="watch"?this.$watcher[a].push(n):i==="watchAfter"&&this.$afterWatcher[a].push(n),!Object.prototype.hasOwnProperty.call(this.$data,a)&&(this.$data[a]=this[a],delete this[a],r[a]={set:s=>{this.$data[a]=s,this.$watcher[a].forEach(c=>{try{c&&c(s,a)}catch(d){console.error(d)}}),this.$afterWatcher[a].forEach(c=>{try{c&&c(s,a)}catch(d){console.error(d)}})},get:()=>this.$data[a],configurable:!0})}),Object.defineProperties(this,r)};Object.defineProperty(this,"watch",{value:t("watch"),configurable:!0}),Object.defineProperty(this,"watchAfter",{value:t("watchAfter"),configurable:!0})}empty(){this.$afterWatcher={},this.$data={},this.$watcher={}}}const gt=()=>new te;class ee{constructor({root:t,max:i,value:o,min:n,onChange:r,productHasQuantityRule:a}){m(this,"root");m(this,"data");m(this,"onChange");m(this,"input");m(this,"minus");m(this,"plus");m(this,"productHasQuantityRule");var s,c,d,u,w,f,h,g,C,P;this.root=t,this.input=((s=this.root)==null?void 0:s.querySelector('input[name="quantity"]'))||null,this.minus=null,this.plus=null,p()?(this.minus=(c=this.root)==null?void 0:c.querySelector('button[name="minus"]'),this.plus=(d=this.root)==null?void 0:d.querySelector('button[name="plus"]')):(this.minus=(u=this.root)==null?void 0:u.querySelector('.quantity__button[name="minus"]'),this.plus=(w=this.root)==null?void 0:w.querySelector('.quantity__button[name="plus"]')),this.productHasQuantityRule=a,this.data={min:(f=this.input)!=null&&f.min?Number(this.input.min):n,max:(h=this.input)!=null&&h.max?Number(this.input.max):i,step:(g=this.input)!=null&&g.step?Number(this.input.step):1,value:(C=this.input)!=null&&C.value?Number((P=this.input)==null?void 0:P.value):o},this.onChange=r,this.initEvent()}initEvent(){var t,i,o,n;if((t=this.minus)==null||t.addEventListener("click",()=>{this.data.min<this.data.value&&(this.data.value-=this.data.step,this.data.value<this.data.min&&(this.data.value=this.data.min),this.render())}),(i=this.plus)==null||i.addEventListener("click",()=>{this.data.value<this.data.max&&(this.data.value+=this.data.step,this.data.value>this.data.max&&(this.data.value=this.data.max),this.render())}),(o=this.input)==null||o.addEventListener("input",r=>{var c,d;const a=(d=(c=r.target)==null?void 0:c.value)==null?void 0:d.replace(/[^\d]/g,""),s=a&&Number(a);this.data.value=+s,this.render()}),(n=this.input)==null||n.addEventListener("blur",r=>{var s,c;const a=+((s=r.target)==null?void 0:s.value);this.data.value=+a,a>this.data.max?this.data.value=this.data.max:this.data.min>a&&(this.data.value=this.data.min),(c=window.magpieBridge.event)==null||c.emit("product:quantity:modify",[this.data.value,this.root]),this.render()}),this.input){const r=new MutationObserver(s=>{var c,d,u;for(const w of s)if(this.productHasQuantityRule){if(w.attributeName==="min"){const f=Number((c=this.input)==null?void 0:c.min);this.setStepperData({min:f,value:f})}else if(w.attributeName==="max"){const f=Number((d=this.input)==null?void 0:d.max);this.setStepperData({max:f})}else if(w.attributeName==="step"){const f=Number((u=this.input)==null?void 0:u.step);this.setStepperData({step:f})}}else this.render()}),a={attributes:!0};r.observe(this.input,a)}}setSingleDisabled(t,i){var o,n,r,a;i?p()?(o=this.root.querySelector(`button[name="${t}"]`))==null||o.setAttribute("disabled",""):(n=this.root.querySelector(`.quantity__button[name="${t}"]`))==null||n.classList.add("disabled"):p()?(r=this.root.querySelector(`button[name="${t}"]`))==null||r.removeAttribute("disabled"):(a=this.root.querySelector(`.quantity__button[name="${t}"]`))==null||a.classList.remove("disabled")}setStepperData(t){this.data=b(b({},this.data),t),this.render()}render(){var t;!this.root||(this.data.value&&(this.setSingleDisabled("minus",this.data.min>=this.data.value),this.setSingleDisabled("plus",this.data.max<=this.data.value)),setTimeout(()=>{this.input&&(this.input.value=String(this.data.value))}),(t=this.onChange)==null||t.call(this,this.data.value))}}const yt=1;class ie{constructor(t,i,o,n){m(this,"root");m(this,"product");m(this,"productHasQuantityRule");m(this,"dataPool");m(this,"fixedMax");m(this,"skuStepper");m(this,"onChange");var r,a;this.dataPool=gt(),this.root=null,p()?this.root=t==null?void 0:t.querySelector("theme-input-number"):this.root=t==null?void 0:t.querySelector("quantity-input"),this.product=i,this.productHasQuantityRule=(a=(r=this.product)==null?void 0:r.variants)==null?void 0:a.some(s=>s.quantity_rule&&(s.quantity_rule.min>1||s.quantity_rule.increment>1||s.quantity_rule.max)),this.fixedMax=o!=null?o:0,this.onChange=n,this.skuStepper=new ee({root:this.root,max:this.getMax(),value:yt,min:1,onChange:s=>{var c;!this.dataPool||isNaN(s)||(s!==this.dataPool.quantity&&(this.dataPool.quantity=s),(c=this.onChange)==null||c.call(this,s))},productHasQuantityRule:this.productHasQuantityRule}),this.init()}init(){var t,i;!this.dataPool||(this.dataPool.quantity=((i=(t=this.skuStepper)==null?void 0:t.data)==null?void 0:i.value)||yt,this.dataPool.watch(["quantity"],()=>{this.dataPool&&this.setCurrentNum(this.dataPool.quantity)}))}setCurrentNum(t){if(!this.skuStepper)return;const i=G(b({},this.skuStepper.data),{value:t});this.skuStepper.setStepperData(i)}getMax(){return this.fixedMax?this.fixedMax:99999}destory(){var t;(t=this.dataPool)==null||t.empty(),delete this.dataPool,delete this.root,delete this.fixedMax,delete this.onChange,delete this.skuStepper}}const oe=e=>e!=null&&e.length?e.map(t=>{var n;const i=t.name,o=(n=t.values)==null?void 0:n.map(r=>({name:r,imgUrl:t.values_images[r],disabled:!1}));return{specName:i,specAttrList:o}}):[],re=(e,t)=>e.reduce((i,o)=>(Object.keys(i).forEach(n=>{if(o[n]===null)return;let r=i[n].find(u=>u.value===o[n]);typeof r=="undefined"&&(r={value:o[n],soldOut:!0},i[n].push(r));const a=t==null?void 0:t.find(u=>u.index==="option1"),s=t==null?void 0:t.find(u=>u.index==="option2"),c=t==null?void 0:t.find(u=>u.index==="option3"),d=t==null?void 0:t.find(u=>u.index==="option4");switch(n){case"option1":r.soldOut=r.soldOut&&o.available?!1:r.soldOut;break;case"option2":a&&o.option1===a.value&&(r.soldOut=r.soldOut&&o.available?!1:r.soldOut);break;case"option3":a&&o.option1===a.value&&s&&o.option2===s.value&&(r.soldOut=r.soldOut&&o.available?!1:r.soldOut);break;case"option4":a&&o.option1===a.value&&s&&o.option2===s.value&&c&&o.option3===c.value&&(r.soldOut=r.soldOut&&o.available?!1:r.soldOut);break;case"option5":a&&o.option1===a.value&&s&&o.option2===s.value&&c&&o.option3===c.value&&d&&o.option4===d.value&&(r.soldOut=r.soldOut&&o.available?!1:r.soldOut);break}}),i),{option1:[],option2:[],option3:[],option4:[],option5:[]});class ne{constructor(t,i,o){m(this,"root");m(this,"dataPool");m(this,"form");m(this,"skuType");m(this,"productData");m(this,"currentSkuId");var n,r,a,s;this.dataPool=gt(),this.root=null,p()?this.root=(t==null?void 0:t.querySelector("theme-variant-radio-picker"))||(t==null?void 0:t.querySelector("theme-variant-select-picker"))||null:this.root=(t==null?void 0:t.querySelector("variant-radios"))||(t==null?void 0:t.querySelector("variant-selects"))||null,this.skuType=((n=this.root)==null?void 0:n.tagName)==="VARIANT-RADIOS"||((r=this.root)==null?void 0:r.tagName)==="THEME-VARIANT-RADIO-PICKER"?"flatten":"select",this.form=o,this.productData=i,this.currentSkuId=((s=(a=this.form)==null?void 0:a.querySelector('[name="id"]'))==null?void 0:s.value)||"",this.init()}init(){var t;this.bindEvent(),this.dataPool&&(this.dataPool.attrArray=oe(this.productData.options),this.dataPool.activeSku=((t=this.productData.variants)==null?void 0:t.find(({id:i})=>i===this.currentSkuId))||{},p()||this.updateOptionsDisabled(),this.updateCurrentSpecIndex())}clickAttr(t,i){var o,n,r,a,s,c,d,u,w;if(!(!this.dataPool||!this.form)){if(!this.root){const f=[...this.dataPool.currentSpecIndex];f[t]=i;const h=f.map((P,I)=>{var $;return($=this.productData.options)==null?void 0:$[I].values[P]}).join(" \xB7 "),g=(n=(o=this.productData.variants)==null?void 0:o.find(P=>P.title===h))==null?void 0:n.id,C=(r=this.form)==null?void 0:r.querySelector('[name="id"]');C&&g&&(C.value=g,C.dispatchEvent(new Event("change",{bubbles:!0})));return}if(this.skuType==="flatten"){(a=this.root)==null||a.querySelectorAll("fieldset")[t].querySelectorAll("input")[i].click();return}if(this.skuType==="select"){const f=(c=(s=this.root)==null?void 0:s.querySelectorAll("select"))==null?void 0:c[t],h=(w=(u=(d=this.productData.options)==null?void 0:d[t])==null?void 0:u.values)==null?void 0:w[i];if(f&&h&&(f.value=h,f.dispatchEvent(new Event("change",{bubbles:!0})),p())){const g=f.closest("theme-select");g&&Array.from(g.querySelectorAll(".theme-select__option")).forEach((P,I)=>{I===i?P.setAttribute("selected","true"):P.removeAttribute("selected")})}}}}bindEvent(){var t,i;(t=this.form)==null||t.addEventListener("change",o=>{var r,a,s;if(!this.dataPool)return;const n=o.target;n.name==="id"&&(this.currentSkuId=n.value,this.dataPool.activeSku=((r=this.productData.variants)==null?void 0:r.find(({id:c})=>c===this.currentSkuId))||{},this.root||(this.dataPool.currentSpecIndex=((s=(a=this.dataPool.activeSku)==null?void 0:a.options)==null?void 0:s.map((c,d)=>{var u;return(u=this.productData.options)==null?void 0:u[d].values.findIndex(w=>w===c)}))||[]))}),(i=this.root)==null||i.addEventListener("change",()=>{p()||this.updateOptionsDisabled(),this.updateCurrentSpecIndex()})}updateOptionsDisabled(){var o,n,r,a,s,c;let t=(a=(r=(n=(o=this.dataPool)==null?void 0:o.activeSku)==null?void 0:n.options)==null?void 0:r.map)==null?void 0:a.call(r,(d,u)=>({index:`option${u+1}`,value:d}));if(!t&&this.root)if(this.skuType==="select")t=(s=Array.from(this.root.querySelectorAll("select")))==null?void 0:s.map((d,u)=>({index:`option${u+1}`,value:d==null?void 0:d.value}));else{const d=Array.from(this.root.querySelectorAll("fieldset"));t=d==null?void 0:d.map((u,w)=>{var f,h;return{index:`option${w+1}`,value:(h=(f=Array.from(u.querySelectorAll("input")))==null?void 0:f.find(g=>g.checked))==null?void 0:h.value}})}if(!t)return;const i=re(this.productData.variants,t);(c=this.dataPool)==null||c.attrArray.forEach((d,u)=>{d.specAttrList.forEach((w,f)=>{var C,P;const h=`option${u+1}`,g=(P=(C=i==null?void 0:i[h])==null?void 0:C[f])==null?void 0:P.soldOut;w.disabled=g})})}updateCurrentSpecIndex(){var i,o,n;if(!this.dataPool)return;if(!this.root){(i=this.dataPool)!=null&&i.activeSku&&(this.dataPool.currentSpecIndex=((o=this.dataPool.activeSku.options)==null?void 0:o.map((r,a)=>{var s;return(s=this.productData.options)==null?void 0:s[a].values.findIndex(c=>c===r)}))||[]);return}let t=[];if(this.skuType==="select")t=(n=Array.from(this.root.querySelectorAll("select")))==null?void 0:n.map(r=>r==null?void 0:r.value);else{const r=Array.from(this.root.querySelectorAll("fieldset"));t=r==null?void 0:r.map(a=>{var s,c;return(c=(s=Array.from(a.querySelectorAll("input")))==null?void 0:s.find(d=>d.checked))==null?void 0:c.value})}this.dataPool.currentSpecIndex=(t==null?void 0:t.map((r,a)=>{var s;return(s=this.productData.options)==null?void 0:s[a].values.findIndex(c=>c===r)}))||[]}destory(){var t;(t=this.dataPool)==null||t.empty(),delete this.dataPool,delete this.root,delete this.form}}const Ct=()=>{var e,t,i,o;return((t=(e=window==null?void 0:window.Shopline)==null?void 0:e.uri)==null?void 0:t.alias)===B.ProductsDetail||((o=(i=window==null?void 0:window.Shopline)==null?void 0:i.uri)==null?void 0:o.alias)===B.PreviewProductsDetail};let vt=!1,T;function St(e,t){var a,s,c;const i=new FormData(e),o=(a=i.get("id"))!=null?a:null,n=i.get("quantity"),r=(c=(s=t==null?void 0:t.variants)==null?void 0:s.find(d=>(d==null?void 0:d.id)===o))!=null?c:null;return{skuId:o,quantity:n,activeSku:r}}const x=(e,t,i,o)=>y(this,null,function*(){var f;const n=yield pt(t);if(!n)return;const r=zt(o);if(!r)return;const{form:a,root:s}=r;if(!s||!a)return;const c=new ne(s,n,a),d=new ie(s,n);let u;switch(e){case"featureProduct":u={module:"featuredProduct"};break;case"productDetail":u={module:"pdp"};break;case"quickAdd":u={modalType:"quickAddToCart",module:"quickAddToCartModal",modalContainerElement:s};break;case"quickAddWithoutPic":u={modalType:"quickAddWithoutPicToCart",module:"quickAddWithoutPicToCartModal",modalContainerElement:s};break}const w=h=>{var C;h.target.name==="id"&&((C=window.magpieBridge.event)==null||C.emit(l.skuChanged,{data:G(b(b(b({type:"change"},r),St(a,n)),u),{product:n,id:i!=null?i:"productDetail",handle:t,skuTrade:c,quantityStepper:d}),onSuccess:()=>{},onError:()=>{}}))};return a.addEventListener("change",w),(f=window.magpieBridge.event)==null||f.emit(l.skuChanged,{data:G(b(b(b({type:"init"},r),St(a,n)),u),{product:n,id:i!=null?i:"productDetail",handle:t,skuTrade:c,quantityStepper:d}),onSuccess:()=>{},onError:()=>{}}),()=>{var h,g,C;(h=a==null?void 0:a.removeEventListener)==null||h.call(a,"change",w),(g=c==null?void 0:c.destory)==null||g.call(c),(C=d==null?void 0:d.destory)==null||C.call(d)}}),ae=()=>{document.querySelectorAll("[class^='featured-product']").forEach(e=>y(this,null,function*(){var o,n,r,a,s,c;let t=(o=e.querySelector("variant-radios[data-url],variant-selects[data-url]"))==null?void 0:o.dataset.url;if(t||(t=(n=e.querySelector("a[href*='/products/']"))==null?void 0:n.getAttribute("href")),!t&&window.Shopline.url_customization&&(t=(r=e.querySelector(".product__view-details"))==null?void 0:r.getAttribute("href"),(s=(a=window.__SL_Track__)==null?void 0:a.error)==null||s.call(a,"magpieBridgeSdkLog",{error:{message:"[bindFeatureProduct], customization url get product__view-details"}})),!t)return;let i="";if(window.Shopline.url_customization){const d=(c=yield N([t]))==null?void 0:c[0];d&&(i=d.handle)}else i=M(t)||"";!i||x("featureProduct",i,e.id,e)}))},se=()=>{document.querySelectorAll('theme-product-detail[data-section-type="featured-product"]').forEach(e=>y(this,null,function*(){var o,n,r;const t=(o=e==null?void 0:e.dataset)==null?void 0:o.url;if(!t)return;let i="";if(window.Shopline.url_customization){const a=(n=yield N([t]))==null?void 0:n[0];a&&(i=a.handle)}else i=M(t)||"";!i||x("featureProduct",i,(r=e==null?void 0:e.dataset)==null?void 0:r.sectionId,e)}))},ce=()=>{var e,t;U(),R(),p()||window[q]&&window[q].prototype&&window[q].prototype.open&&(window[q].prototype.open=S(window[q].prototype.open,function(){return y(this,null,function*(){var r,a,s,c;const i=this;let o=(a=(r=i.querySelector("[data-product-url]"))==null?void 0:r.dataset)==null?void 0:a.productUrl;if(!o&&(i==null?void 0:i.id)){const d=document.querySelector(`modal-opener[data-modal="#${i.id}"]`),u=d==null?void 0:d.querySelector('button[type="submit"]');u&&((s=u.dataset)==null?void 0:s.productUrl)&&(o=(c=u.dataset)==null?void 0:c.productUrl)}const n=M(o);n&&pt(n)})})),(e=window.magpieBridge.event)==null||e.on(l.quickAddOpen,i=>y(this,null,function*(){const{handle:o,modalContent:n,modal:r,id:a}=(i==null?void 0:i.data)||{};let s=(r==null?void 0:r.tagName)==="PRODUCT-QUICK-ADD-MODAL"?"quickAddWithoutPic":"quickAdd";p()&&(s="quickAdd"),T=yield x(s,o,a,n)})),(t=window.magpieBridge.event)==null||t.on(l.quickAddClose,()=>{T==null||T(),T=void 0})},J=()=>y(this,null,function*(){var e,t;if(!vt){if(vt=!0,ce(),p()?yield customElements.whenDefined("theme-product-form"):yield customElements.whenDefined("product-form"),Ct()){let i="";if(window.Shopline.url_customization){if(p()){const o=document.querySelector('theme-product-detail[data-section-type="main-product"]');i=(e=o==null?void 0:o.dataset)==null?void 0:e.handle}if(!i){const o=(t=yield N([location.pathname]))==null?void 0:t[0];o&&(i=o.handle)}}else i=M(location.href)||"";x("productDetail",i)}p()?se():ae()}});J.key=l.skuChanged;const de=()=>{var e,t;return((t=(e=window==null?void 0:window.Shopline)==null?void 0:e.uri)==null?void 0:t.alias)===B.Products};let kt=!1;const X=()=>y(this,null,function*(){if(!kt&&(kt=!0,de()))if(p()){const e=document.querySelector("theme-facets-form");if(e){yield customElements.whenDefined("theme-facets-form");const t=Object.getPrototypeOf(e);t.updateResults&&(t.updateResults=S(t==null?void 0:t.updateResults,function(){var i;(i=window.magpieBridge.event)==null||i.emit(l.updateCollectionSection,{data:{content:document.getElementById("ResultsContainer")},onSuccess:()=>{},onError:()=>{}})}))}}else yield customElements.whenDefined("facet-filters-form"),window.FacetFiltersForm&&window.FacetFiltersForm.renderProductGridContainer&&(window.FacetFiltersForm.renderProductGridContainer=S(window.FacetFiltersForm.renderProductGridContainer,function(){var e;(e=window.magpieBridge.event)==null||e.emit(l.updateCollectionSection,{data:{content:document.getElementById("ProductListContainer")},onSuccess:()=>{},onError:()=>{}})}))});X.key=l.updateCollectionSection;const ue=()=>{var e,t;return((t=(e=window==null?void 0:window.Shopline)==null?void 0:e.uri)==null?void 0:t.alias)===B.Products};let Pt=!1;const Y=()=>y(this,null,function*(){Pt||(Pt=!0,ue()&&(yield customElements.whenDefined("infinite-scroll"),window.InfiniteScroll&&window.InfiniteScroll.prototype&&window.InfiniteScroll.prototype.handleLoading&&(window.InfiniteScroll.prototype.handleLoading=S(window.InfiniteScroll.prototype.handleLoading,function(e){var t;e===!1&&((t=window.magpieBridge.event)==null||t.emit(l.scrollUpdateCollection,{data:{content:document.querySelector("ul.product-list-content")},onSuccess:()=>{},onError:()=>{}}))}))))});Y.key=l.scrollUpdateCollection;let bt=!1;const qt=e=>{var t;(t=window.magpieBridge.event)==null||t.emit(l.recommendUpdate,{data:{content:e},onSuccess:()=>{},onError:()=>{}})},Z=()=>{if(bt)return;const e=p()?".section-recommended-product":"product-recommendations",t=p()?".block-product-card":".product-card-wrapper",i=document.querySelector(e);if(Ct()&&i){if(i.querySelector(t)){qt(i);return}const o={childList:!0,attributes:!1,subtree:!0},n=new MutationObserver(()=>{!i.querySelector(t)||(n.disconnect(),qt(i))});n.observe(i,o)}bt=!0};Z.key=l.recommendUpdate;const le=(e,t)=>{const i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];let n;if(t=t||i.length,e)for(n=0;n<e;n++)o[n]=i[0|Math.random()*t];else{let r;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;n<36;n++)o[n]||(r=0|Math.random()*16,o[n]=i[n==19?r&3|8:r])}return o.join("")};let At=!1;function pe(e,t,i,o){var r,a,s,c,d;const n=e==null?void 0:e.querySelector("#"+((c=(s=(a=(r=window.Shopline)==null?void 0:r.utils)==null?void 0:a.quickAddModal)==null?void 0:s.contentId)!=null?c:"lf-quick-add-modal-content"));o&&n&&(window.magpieBridge.event&&(window.magpieBridge.event._caches[l.quickAddClose]=[]),(d=window.magpieBridge.event)==null||d.emit(l.quickAddOpen,{data:{modal:e,productUrl:t,handle:o,id:i,modalContent:n},onSuccess:()=>{},onError:()=>{}}))}const V=()=>y(this,null,function*(){var e;At||(U(),(e=window.magpieBridge.event)==null||e.on(l.openQuickAddModal,t=>{const{handle:i,url:o}=(t==null?void 0:t.data)||{};if(!i){console.error("openQuickAddModalRun: handle is required");return}window.Shopline.loadFeatures([{name:"component-quick-add-modal",version:"0.1"}],function(n){return y(this,null,function*(){var a,s,c,d,u,w,f,h,g,C,P,I,$,Nt,xt;if(n)throw n;let r;if(H())r=o;else{const W=`/products/${i}`;r=(a=window==null?void 0:window.Shopline)!=null&&a.redirectTo?(c=(s=window==null?void 0:window.Shopline)==null?void 0:s.redirectTo)==null?void 0:c.call(s,W):W}if(yield(f=(w=(u=(d=window.Shopline)==null?void 0:d.utils)==null?void 0:u.quickAddModal)==null?void 0:w.open)==null?void 0:f.call(w,r),!p()){const W="component-quick-add-modal-"+le(20);(P=(C=(g=(h=window.Shopline)==null?void 0:h.utils)==null?void 0:g.quickAddModal)==null?void 0:C.modal)!=null&&P.container&&pe((xt=(Nt=($=(I=window.Shopline)==null?void 0:I.utils)==null?void 0:$.quickAddModal)==null?void 0:Nt.modal)==null?void 0:xt.container,r,W,i)}})})}),At=!0)});V.key=l.openQuickAddModal;const he=()=>{var e,t;return((t=(e=window==null?void 0:window.Shopline)==null?void 0:e.uri)==null?void 0:t.alias)===B.ProductsSearch};let Dt=!1;const tt=()=>y(this,null,function*(){if(!Dt&&(Dt=!0,he()))if(p()){const e=document.querySelector("theme-facets-form");if(e){yield customElements.whenDefined("theme-facets-form");const t=Object.getPrototypeOf(e);t.updateResults&&(t.updateResults=S(t==null?void 0:t.updateResults,function(){var i;(i=window.magpieBridge.event)==null||i.emit(l.updateSearchSection,{data:{content:document.getElementById("ResultsContainer")},onSuccess:()=>{},onError:()=>{}})}))}}else yield customElements.whenDefined("facet-filters-form"),window.FacetFiltersForm&&window.FacetFiltersForm.renderProductGridContainer&&(window.FacetFiltersForm.renderProductGridContainer=S(window.FacetFiltersForm.renderProductGridContainer,function(){var e;(e=window.magpieBridge.event)==null||e.emit(l.updateSearchSection,{data:{content:document.getElementById("ProductListContainer")},onSuccess:()=>{},onError:()=>{}})}))});tt.key=l.updateSearchSection;let Et=!1;const et=()=>{var e;window.magpieBridge.event&&(window.magpieBridge.event._caches[l.miniCartOpen]=[]),(e=window.magpieBridge.event)==null||e.emit(l.miniCartClose,{onSuccess:()=>{},onError:()=>{}})},it=()=>y(this,null,function*(){var e,t;if(!Et){if(Et=!0,p()){const i=(e=window.themeEventCenter)==null?void 0:e.getCurrentDetail("cart:closed");(i==null?void 0:i.type)==="drawer"&&et(),(t=window.themeEventCenter)==null||t.addListener("cart:closed",o=>{const{detail:n}=o;n.type==="drawer"&&et()})}A()&&document.querySelector("cart-drawer-entry")&&(yield customElements.whenDefined("cart-drawer-entry"),window.CartDrawerEntry&&window.CartDrawerEntry.prototype&&window.CartDrawerEntry.prototype.close&&(window.CartDrawerEntry.prototype.close=S(window.CartDrawerEntry.prototype.close,function(){et()})))}});it.key=l.miniCartClose;let Bt=!1;const F=()=>{var e;window.magpieBridge.event&&(window.magpieBridge.event._caches[l.miniCartClose]=[]),(e=window.magpieBridge.event)==null||e.emit(l.miniCartOpen,{onSuccess:()=>{},onError:()=>{}})},ot=()=>y(this,null,function*(){var e,t,i,o;if(!Bt){if(Bt=!0,p()){const n=(e=window.themeEventCenter)==null?void 0:e.getCurrentDetail("cart:opened");(n==null?void 0:n.type)==="drawer"&&F(),(t=window.themeEventCenter)==null||t.addListener("cart:opened",r=>{const{detail:a}=r;a.type==="drawer"&&F()})}if(A()){const n=document.querySelector("cart-drawer-entry");n&&(yield customElements.whenDefined("cart-drawer-entry"),window.CartDrawerEntry&&window.CartDrawerEntry.prototype&&window.CartDrawerEntry.prototype.open&&((o=(i=n.querySelector("cart-drawer"))==null?void 0:i.classList)!=null&&o.contains("active")&&F(),window.CartDrawerEntry.prototype.open=S(window.CartDrawerEntry.prototype.open,function(){F()})))}}});ot.key=l.miniCartOpen;let Ot=!1;const It=()=>{var e;(e=window.magpieBridge.event)==null||e.emit(l.miniCartUpdate,{onSuccess:()=>{},onError:()=>{}})},rt=()=>y(this,null,function*(){if(!Ot){if(Ot=!0,p()){const e=document.querySelector("theme-cart-drawer");e&&(yield customElements.whenDefined("theme-cart-drawer"),e.replaceElement&&(e.replaceElement=S(e==null?void 0:e.replaceElement,It)))}A()&&document.querySelector("cart-drawer-entry")&&(yield customElements.whenDefined("cart-drawer-entry"),window.CartItems&&window.CartItems.prototype&&window.CartItems.prototype.disableLoading&&(window.CartItems.prototype.disableLoading=S(window.CartItems.prototype.disableLoading,function(){(this==null?void 0:this.constructor)===(window==null?void 0:window.CartDrawerItems)&&It()})))}});rt.key=l.miniCartUpdate;let _t=!1;const nt=()=>{var e;window.magpieBridge.event&&(window.magpieBridge.event._caches[l.bannerMiniCartOpen]=[]),(e=window.magpieBridge.event)==null||e.emit(l.bannerMiniCartClose,{onSuccess:()=>{},onError:()=>{}})},at=()=>y(this,null,function*(){var e,t;if(!_t){if(_t=!0,p()){const i=(e=window.themeEventCenter)==null?void 0:e.getCurrentDetail("cart:closed");(i==null?void 0:i.type)==="notification"&&nt(),(t=window.themeEventCenter)==null||t.addListener("cart:closed",o=>{const{detail:n}=o;n.type==="notification"&&nt()})}A()&&document.querySelector("cart-notification")&&(yield customElements.whenDefined("cart-notification"),window.CartNotification&&window.CartNotification.prototype&&window.CartNotification.prototype.close&&(window.CartNotification.prototype.close=S(window.CartNotification.prototype.close,function(){nt()})))}});at.key=l.bannerMiniCartClose;let Lt=!1;const Q=()=>{var e;window.magpieBridge.event&&(window.magpieBridge.event._caches[l.bannerMiniCartClose]=[]),(e=window.magpieBridge.event)==null||e.emit(l.bannerMiniCartOpen,{onSuccess:()=>{},onError:()=>{}})},st=()=>y(this,null,function*(){var e,t,i;if(!Lt){if(Lt=!0,p()){const o=(e=window.themeEventCenter)==null?void 0:e.getCurrentDetail("cart:opened");(o==null?void 0:o.type)==="notification"&&Q(),(t=window.themeEventCenter)==null||t.addListener("cart:opened",n=>{const{detail:r}=n;r.type==="notification"&&Q()})}if(A()){const o=document.querySelector("cart-notification");o&&(yield customElements.whenDefined("cart-notification"),window.CartNotification&&window.CartNotification.prototype&&window.CartNotification.prototype.open&&((i=o==null?void 0:o.classList)!=null&&i.contains("active")&&Q(),window.CartNotification.prototype.open=S(window.CartNotification.prototype.open,function(){Q()})))}}});st.key=l.bannerMiniCartOpen;let Mt=!1;const Rt=()=>{var e;(e=window.magpieBridge.event)==null||e.emit(l.cartPageUpdate,{onSuccess:()=>{},onError:()=>{}})},ct=()=>y(this,null,function*(){if(Mt)return;if(Mt=!0,Xt()){if(p()){const t=document.querySelector("theme-main-cart-items");if(t){yield customElements.whenDefined("theme-main-cart-items");const i=Object.getPrototypeOf(t);i.replaceElement&&(i.replaceElement=S(i==null?void 0:i.replaceElement,Rt))}}A()&&(yield customElements.whenDefined("cart-items"),window.CartItems&&window.CartItems.prototype&&window.CartItems.prototype.disableLoading&&(window.CartItems.prototype.disableLoading=S(window.CartItems.prototype.disableLoading,function(){(this==null?void 0:this.constructor)===(window==null?void 0:window.CartItems)&&Rt()})))}});ct.key=l.cartPageUpdate;let Ut=!1;const E=e=>{var t,i,o,n;(o=(i=(t=window.magpieBridge.event)==null?void 0:t._caches)==null?void 0:i[l.stageHeaderSticky])!=null&&o.length&&(window.magpieBridge.event._caches[l.stageHeaderSticky]=[]),(n=window.magpieBridge.event)==null||n.emit(l.stageHeaderSticky,{data:{stickyActive:e},onError(){},onSuccess(){}})},Tt=()=>{const e=document.querySelector('[data-settings-id="shopline-section-header"]'),t=e==null?void 0:e.classList;t!=null&&t.contains("theme-sticky-header--sticky")?t!=null&&t.contains("theme-sticky-header--sticky-collapse")?E(!1):E(!0):E(!1)},fe=()=>{Tt(),window.addEventListener("scroll",()=>{Tt()})},dt=()=>y(this,null,function*(){var e,t,i,o,n;if(!Ut)if(Ut=!0,p())fe();else{yield Promise.race([customElements.whenDefined("sticky-header"),customElements.whenDefined("header-layout")]);const r=window.StickyHeader||window.HeaderLayout,a=document.querySelector("#shopline-section-header");a&&(a.classList.contains("shopline-section-header-sticky")&&!a.classList.contains("shopline-section-header-hidden")||a.classList.contains("shopline-section-header-sticky--always"))&&E(!0),(e=r==null?void 0:r.prototype)!=null&&e.reveal&&(r.prototype.reveal=S(r.prototype.reveal,function(){E(!0)})),(t=r==null?void 0:r.prototype)!=null&&t.hide&&(r.prototype.hide=S(r.prototype.hide,function(){E(!1)})),(i=r==null?void 0:r.prototype)!=null&&i.reset&&(r.prototype.reset=S(r.prototype.reset,function(){E(!1)})),(o=r==null?void 0:r.prototype)!=null&&o.addStickyClass&&(r.prototype.addStickyClass=S(r.prototype.addStickyClass,function(){E(!0)})),(n=r==null?void 0:r.prototype)!=null&&n.removeSticyClass&&(r.prototype.removeSticyClass=S(r.prototype.removeSticyClass,function(){E(!1)}))}});dt.key=l.stageHeaderSticky;const O={[J.key]:J,[X.key]:X,[Y.key]:Y,[it.key]:it,[ot.key]:ot,[rt.key]:rt,[Z.key]:Z,[U.key]:U,[R.key]:R,[dt.key]:dt,[at.key]:at,[st.key]:st,[ct.key]:ct,[V.key]:V,[tt.key]:tt},ut=new Map;window.magpieBridge&&(window.magpieBridge.registeredListMap=ut);const we=e=>{e.forEach(t=>{var i;ut.get(t)||O[t]&&(ut.set(t,!0),(i=O==null?void 0:O[t])==null||i.call(O))})};function me(){var i;const e="_magpie_bridge_sdk";if((i=window.magpieBridge)!=null&&i[e])return;window.magpieBridge[e]=!0;function t(){var o,n,r;Zt(),window.magpieBridge&&(window.magpieBridge.registerEventName=we,(n=(o=window.magpieBridge)==null?void 0:o._resolve_)==null||n.call(o),(r=window.magpieBridge)==null||delete r._resolve_)}t()}v()?me():window.magpieBridge&&(window.magpieBridge.registerEventName=function(){},($t=(j=window.magpieBridge)==null?void 0:j._resolve_)==null||$t.call(j),(Ht=window.magpieBridge)==null||delete Ht._resolve_)})();
